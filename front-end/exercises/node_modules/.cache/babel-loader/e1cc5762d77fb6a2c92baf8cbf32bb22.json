{"ast":null,"code":"import React from'react';import SplashPage from'./components/SplashPage';import QuestionPrompt from'./components/QuestionPrompt';import AnswerForm from'./components/AnswerForm';import{useState,useEffect,useRef}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[page,setPage]=useState(0);const[question,setQuestion]=useState({id:0,parameter:0,prompt:'Loading...',correctAnswer:'',studentAnswer:''});const tokenRef=useRef(new URLSearchParams(window.location.search).get('t'));const[message,setMessage]=useState('');useEffect(()=>{const timer=setTimeout(()=>{if(message===\"\")setPage(1);},3000);return()=>clearTimeout(timer);},[message]);const getQuestion=async()=>{try{if(!tokenRef.current){throw new Error('No token found');}const response=await fetch('/question?token='+tokenRef.current,{method:'GET',headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':'*'}});if(!response.ok){throw new Error('Failed to fetch question');}const data=await response.json();tokenRef.current=data.token;setQuestion(data.question);console.log('Fetched:',question.prompt);}catch(error){console.error('Error fetching question:',error);setMessage('Error fetching question');setPage(0);}};// Fetch the first question when the app loads\nuseEffect(()=>{if(tokenRef.current)getQuestion();else setMessage('You must launch this app from the assignment link in your LMS.');},[getQuestion]);return/*#__PURE__*/_jsxs(\"div\",{children:[page===0&&/*#__PURE__*/_jsx(SplashPage,{message:message}),page>0&&/*#__PURE__*/_jsx(QuestionPrompt,{question:question}),page===1&&/*#__PURE__*/_jsx(AnswerForm,{question:question,setPage:setPage})]});};export default App;","map":{"version":3,"names":["React","SplashPage","QuestionPrompt","AnswerForm","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","App","page","setPage","question","setQuestion","id","parameter","prompt","correctAnswer","studentAnswer","tokenRef","URLSearchParams","window","location","search","get","message","setMessage","timer","setTimeout","clearTimeout","getQuestion","current","Error","response","fetch","method","headers","ok","data","json","token","console","log","error","children"],"sources":["/Users/wight/JS Programs/chem4ap_react/src/App.tsx"],"sourcesContent":["import React from 'react';\nimport SplashPage from './components/SplashPage';\nimport QuestionPrompt from './components/QuestionPrompt';\nimport AnswerForm from './components/AnswerForm';\nimport { useState, useEffect, useCallback, useRef } from 'react';\n\ninterface Question {\n  id: number;\n  parameter: number\n  prompt: string;\n  correctAnswer: string;\n  studentAnswer: string;\n}\n\nconst App: React.FC = () => {\n  const [page, setPage] = useState(0);\n  const [question, setQuestion] = useState<Question>({\n    id: 0,\n    parameter: 0,\n    prompt: 'Loading...',\n    correctAnswer: '',\n    studentAnswer: ''\n  });\n  const tokenRef = useRef<string | null>(new URLSearchParams(window.location.search).get('t'));\n  const [message, setMessage] = useState<string>('');\n  \n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (message===\"\") setPage(1);\n    }, 3000);\n    return () => clearTimeout(timer);\n  }, [message]);\n\n  const getQuestion = async () => {\n    try {\n      if (!tokenRef.current) {\n        throw new Error('No token found');\n      }\n      const response = await fetch('/question?token=' + tokenRef.current, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch question');\n      }\n      const data = await response.json();\n      tokenRef.current = data.token;\n      setQuestion(data.question);\n      console.log('Fetched:', question.prompt);\n    } catch (error) {\n      console.error('Error fetching question:', error);\n      setMessage('Error fetching question');\n      setPage(0)\n    }\n  };\n  \n  // Fetch the first question when the app loads\n  useEffect(() => {\n    if (tokenRef.current) getQuestion();\n    else setMessage('You must launch this app from the assignment link in your LMS.');\n  }, [getQuestion]);\n\n  return (\n    <div>\n      {page === 0 && <SplashPage message={message} />}\n      {page > 0 && <QuestionPrompt question={question} />}\n      {page === 1 && <AnswerForm question={question} setPage = {setPage}/>}\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}