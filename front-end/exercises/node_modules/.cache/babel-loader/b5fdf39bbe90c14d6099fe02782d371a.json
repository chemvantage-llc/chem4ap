{"ast":null,"code":"import React from'react';import SplashPage from'./components/SplashPage';import QuestionPrompt from'./components/QuestionPrompt';import AnswerForm from'./components/AnswerForm';import{useState,useEffect,useRef,useCallback}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[page,setPage]=useState(0);const[question,setQuestion]=useState({id:0,parameter:0,prompt:'Loading...',correctAnswer:'',studentAnswer:''});const tokenRef=useRef(new URLSearchParams(window.location.search).get('t'));const[message,setMessage]=useState('');useEffect(()=>{const timer=setTimeout(()=>{setPage(1);if(message!==\"\")setPage(0);},3000);return()=>clearTimeout(timer);},[message]);const getQuestion=useCallback(async()=>{if(page!==1)return;try{if(!tokenRef.current){throw new Error('No token found');}const response=await fetch('/question?token='+tokenRef.current,{method:'GET',headers:{'Content-Type':'application/json','Authorization':'Bearer '+tokenRef.current}});if(!response.ok){throw new Error('Failed to fetch question');}const data=await response.json();if(data.token===null){throw new Error('Invalid token');}tokenRef.current=data.token;setQuestion(data.question);console.log('Fetched a question');}catch(error){console.error('Error fetching question:',error);setMessage('You must launch this app from your LMS');setPage(0);}},[page]);// Fetch the first question when the app loads\nuseEffect(()=>{getQuestion();},[getQuestion]);return/*#__PURE__*/_jsxs(\"div\",{children:[page===0&&/*#__PURE__*/_jsx(SplashPage,{message:message}),page>0&&question.prompt&&/*#__PURE__*/_jsx(QuestionPrompt,{question:question}),page>0&&question.prompt&&/*#__PURE__*/_jsx(AnswerForm,{tokenRef:tokenRef,question:question,page:page,setPage:setPage})]});};export default App;","map":{"version":3,"names":["React","SplashPage","QuestionPrompt","AnswerForm","useState","useEffect","useRef","useCallback","jsx","_jsx","jsxs","_jsxs","App","page","setPage","question","setQuestion","id","parameter","prompt","correctAnswer","studentAnswer","tokenRef","URLSearchParams","window","location","search","get","message","setMessage","timer","setTimeout","clearTimeout","getQuestion","current","Error","response","fetch","method","headers","ok","data","json","token","console","log","error","children"],"sources":["/Users/wight/JS Programs/chem4ap_react/src/App.tsx"],"sourcesContent":["import React from 'react';\nimport SplashPage from './components/SplashPage';\nimport QuestionPrompt from './components/QuestionPrompt';\nimport AnswerForm from './components/AnswerForm';\nimport { useState, useEffect, useRef, useCallback } from 'react';\n\ninterface Question {\n  id: number;\n  parameter: number\n  prompt: string;\n  correctAnswer: string;\n  studentAnswer: string;\n}\n\nconst App: React.FC = () => {\n  const [page, setPage] = useState(0);\n  const [question, setQuestion] = useState<Question>({\n    id: 0,\n    parameter: 0,\n    prompt: 'Loading...',\n    correctAnswer: '',\n    studentAnswer: ''\n  });\n  const tokenRef = useRef<string | null>(new URLSearchParams(window.location.search).get('t'));\n  const [message, setMessage] = useState<string>('');\n  \n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setPage(1);\n      if (message !== \"\") setPage(0);\n    }, 3000);\n    return () => clearTimeout(timer);\n  }, [message]);\n\n  const getQuestion = useCallback(async () => {\n    if (page !== 1) return;\n    try {\n      if (!tokenRef.current) {\n        throw new Error('No token found');\n      }\n      const response = await fetch('/question?token=' + tokenRef.current, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + tokenRef.current\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch question');\n      }\n      const data = await response.json();\n      if (data.token === null) {\n        throw new Error('Invalid token');\n      }\n      tokenRef.current = data.token;\n      setQuestion(data.question);\n      console.log('Fetched a question');\n    } catch (error) {\n      console.error('Error fetching question:', error);\n      setMessage('You must launch this app from your LMS');\n      setPage(0);\n    }\n  }, [page]);\n\n  // Fetch the first question when the app loads\n  useEffect(() => {\n    getQuestion();\n  }, [getQuestion]);\n\n  return (\n    <div>\n      {page === 0 && <SplashPage message={message} />}\n      {page > 0 && question.prompt && <QuestionPrompt question={question} />}\n      {page > 0 && question.prompt && <AnswerForm tokenRef={tokenRef} question={question} page={page} setPage={setPage} />}\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}