{"ast":null,"code":"var _jsxFileName = \"/Users/wight/JS Programs/chem4ap_react/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport SplashPage from './components/SplashPage';\nimport QuestionPrompt from './components/QuestionPrompt';\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [page, setPage] = useState(0);\n  const [question, setQuestion] = useState({\n    prompt: 'Loading...',\n    correctAnswer: '',\n    studentAnswer: ''\n  });\n  const tokenRef = useRef(new URLSearchParams(window.location.search).get('t'));\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    if (tokenRef.current === null) {\n      setMessage('You must launch this app from the assignment link in your LMS.');\n    }\n  }, []);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (message === \"\") setPage(1);\n    }, 3000);\n    return () => clearTimeout(timer);\n  }, [message]);\n  const getQuestion = useCallback(async () => {\n    try {\n      if (!tokenRef.current) {\n        throw new Error('No token found');\n      }\n      const response = await fetch('http://localhost:8080/question', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n          //'Authorization': `Bearer ${token}`,\n          //'Access-Control-Allow-Origin': '*'\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch question');\n      }\n      const data = await response.json();\n      tokenRef.current = data.token;\n      setQuestion(data.question);\n      console.log('Fetched:', question.prompt);\n    } catch (error) {\n      console.error('Error fetching question:', error);\n      setMessage('Error fetching question');\n      setPage(0);\n    }\n  }, []);\n\n  // Fetch the first question when the app loads\n  useEffect(() => {\n    getQuestion();\n  }, [getQuestion]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [page === 0 && /*#__PURE__*/_jsxDEV(SplashPage, {\n      message: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 22\n    }, this), page > 0 && /*#__PURE__*/_jsxDEV(QuestionPrompt, {\n      question: question\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 20\n    }, this), page === 1 && /*#__PURE__*/_jsxDEV(AnswerForm, {\n      question: question,\n      setPage: setPage,\n      token: tokenRef.current,\n      getQuestion: getQuestion\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 22\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"VzdV+LGGYneXOBZwYNDw/NrX9kQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","SplashPage","QuestionPrompt","useState","useEffect","useCallback","useRef","jsxDEV","_jsxDEV","App","_s","page","setPage","question","setQuestion","prompt","correctAnswer","studentAnswer","tokenRef","URLSearchParams","window","location","search","get","message","setMessage","current","timer","setTimeout","clearTimeout","getQuestion","Error","response","fetch","method","headers","ok","data","json","token","console","log","error","children","fileName","_jsxFileName","lineNumber","columnNumber","AnswerForm","_c","$RefreshReg$"],"sources":["/Users/wight/JS Programs/chem4ap_react/src/App.tsx"],"sourcesContent":["import React from 'react';\nimport SplashPage from './components/SplashPage';\nimport QuestionPrompt from './components/QuestionPrompt';\nimport { useState, useEffect, useCallback, useRef } from 'react';\n\ninterface Question {\n  prompt: string;\n  correctAnswer: string;\n  studentAnswer: string;\n}\n\nconst App: React.FC = () => {\n  const [page, setPage] = useState(0);\n  const [question, setQuestion] = useState<Question>({\n    prompt: 'Loading...',\n    correctAnswer: '',\n    studentAnswer: ''\n  });\n  const tokenRef = useRef<string | null>(new URLSearchParams(window.location.search).get('t'));\n  const [message, setMessage] = useState<string>('');\n  \n  useEffect(() => {\n    if (tokenRef.current === null) {\n      setMessage('You must launch this app from the assignment link in your LMS.');\n    }\n  }, []);\n  \n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (message===\"\") setPage(1);\n    }, 3000);\n    return () => clearTimeout(timer);\n  }, [message]);\n\n  const getQuestion = useCallback(async () => {\n    try {\n      if (!tokenRef.current) {\n        throw new Error('No token found');\n      }\n      const response = await fetch('http://localhost:8080/question', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          //'Authorization': `Bearer ${token}`,\n          //'Access-Control-Allow-Origin': '*'\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch question');\n      }\n      const data = await response.json();\n      tokenRef.current = data.token;\n      setQuestion(data.question);\n      console.log('Fetched:', question.prompt);\n    } catch (error) {\n      console.error('Error fetching question:', error);\n      setMessage('Error fetching question');\n      setPage(0)\n    }\n  }, []);\n  \n  // Fetch the first question when the app loads\n  useEffect(() => {\n    getQuestion();\n  }, [getQuestion]);\n\n  return (\n    <div>\n      {page === 0 && <SplashPage message = {message}/>}\n      {page > 0 && <QuestionPrompt question={question} />}\n      {page === 1 && <AnswerForm question={question} setPage={setPage} token={tokenRef.current} getQuestion={getQuestion} />}\n    </div>\n  );\n};\n\nexport default App;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,cAAc,MAAM,6BAA6B;AACxD,SAASC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,MAAM,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAQjE,MAAMC,GAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACU,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAW;IACjDY,MAAM,EAAE,YAAY;IACpBC,aAAa,EAAE,EAAE;IACjBC,aAAa,EAAE;EACjB,CAAC,CAAC;EACF,MAAMC,QAAQ,GAAGZ,MAAM,CAAgB,IAAIa,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAACC,GAAG,CAAC,GAAG,CAAC,CAAC;EAC5F,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGtB,QAAQ,CAAS,EAAE,CAAC;EAElDC,SAAS,CAAC,MAAM;IACd,IAAIc,QAAQ,CAACQ,OAAO,KAAK,IAAI,EAAE;MAC7BD,UAAU,CAAC,gEAAgE,CAAC;IAC9E;EACF,CAAC,EAAE,EAAE,CAAC;EAENrB,SAAS,CAAC,MAAM;IACd,MAAMuB,KAAK,GAAGC,UAAU,CAAC,MAAM;MAC7B,IAAIJ,OAAO,KAAG,EAAE,EAAEZ,OAAO,CAAC,CAAC,CAAC;IAC9B,CAAC,EAAE,IAAI,CAAC;IACR,OAAO,MAAMiB,YAAY,CAACF,KAAK,CAAC;EAClC,CAAC,EAAE,CAACH,OAAO,CAAC,CAAC;EAEb,MAAMM,WAAW,GAAGzB,WAAW,CAAC,YAAY;IAC1C,IAAI;MACF,IAAI,CAACa,QAAQ,CAACQ,OAAO,EAAE;QACrB,MAAM,IAAIK,KAAK,CAAC,gBAAgB,CAAC;MACnC;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,gCAAgC,EAAE;QAC7DC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACP,cAAc,EAAE;UAChB;UACA;QACF;MACF,CAAC,CAAC;MACF,IAAI,CAACH,QAAQ,CAACI,EAAE,EAAE;QAChB,MAAM,IAAIL,KAAK,CAAC,0BAA0B,CAAC;MAC7C;MACA,MAAMM,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;MAClCpB,QAAQ,CAACQ,OAAO,GAAGW,IAAI,CAACE,KAAK;MAC7BzB,WAAW,CAACuB,IAAI,CAACxB,QAAQ,CAAC;MAC1B2B,OAAO,CAACC,GAAG,CAAC,UAAU,EAAE5B,QAAQ,CAACE,MAAM,CAAC;IAC1C,CAAC,CAAC,OAAO2B,KAAK,EAAE;MACdF,OAAO,CAACE,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChDjB,UAAU,CAAC,yBAAyB,CAAC;MACrCb,OAAO,CAAC,CAAC,CAAC;IACZ;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAR,SAAS,CAAC,MAAM;IACd0B,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC;EAEjB,oBACEtB,OAAA;IAAAmC,QAAA,GACGhC,IAAI,KAAK,CAAC,iBAAIH,OAAA,CAACP,UAAU;MAACuB,OAAO,EAAIA;IAAQ;MAAAoB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,EAC/CpC,IAAI,GAAG,CAAC,iBAAIH,OAAA,CAACN,cAAc;MAACW,QAAQ,EAAEA;IAAS;MAAA+B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAClDpC,IAAI,KAAK,CAAC,iBAAIH,OAAA,CAACwC,UAAU;MAACnC,QAAQ,EAAEA,QAAS;MAACD,OAAO,EAAEA,OAAQ;MAAC2B,KAAK,EAAErB,QAAQ,CAACQ,OAAQ;MAACI,WAAW,EAAEA;IAAY;MAAAc,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACnH,CAAC;AAEV,CAAC;AAACrC,EAAA,CA9DID,GAAa;AAAAwC,EAAA,GAAbxC,GAAa;AAgEnB,eAAeA,GAAG;AAAC,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}