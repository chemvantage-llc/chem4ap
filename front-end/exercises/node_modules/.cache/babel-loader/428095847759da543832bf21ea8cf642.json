{"ast":null,"code":"var _jsxFileName = \"/Users/wight/chem4ap_react/exercises/src/components/AnswerForm.tsx\";\nimport React from 'react';\nimport { useState } from 'react';\nimport FillInBlank from './FillInBlank';\nimport Numeric from './Numeric';\nimport TrueFalse from './TrueFalse';\nimport MultipleChoice from './MultipleChoice';\nimport Checkbox from './CheckBox';\nconst AnswerForm = ({\n  tokenRef,\n  question,\n  page,\n  setPage\n}) => {\n  const [studentAnswer, setStudentAnswer] = useState('');\n  const [responseHtml, setResponseHtml] = useState(null);\n  const handleSubmit = event => {\n    event.preventDefault();\n    submitAnswer();\n    setPage(2); // Show the response\n  };\n  const handleContinue = () => {\n    question.prompt = '';\n    question.type = '';\n    setStudentAnswer(''); // Clear the answer\n    setResponseHtml(''); // Clear the response\n    setPage(1); // Go to the next question\n  };\n  const submitAnswer = async () => {\n    try {\n      console.log(\"Submitting: \" + studentAnswer);\n      const response = await fetch('/answer', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + tokenRef.current\n        },\n        body: JSON.stringify({\n          id: question.id,\n          answer: studentAnswer,\n          ...(question.parameter && {\n            parameter: question.parameter\n          })\n        })\n      });\n      const data = await response.json();\n      tokenRef.current = data.token;\n      if (!tokenRef.current) console.log(data.error, question);else setResponseHtml(data.html);\n    } catch (error) {\n      console.error('Error submitting answer:', error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      fontSize: '1.5em',\n      fontWeight: 'bold'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, page === 1 && (question.type === 'fill_in_blank' && /*#__PURE__*/React.createElement(FillInBlank, {\n    setStudentAnswer: setStudentAnswer,\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 47\n    }\n  }) || question.type === 'numeric' && /*#__PURE__*/React.createElement(Numeric, {\n    units: question.units,\n    setStudentAnswer: setStudentAnswer,\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 41\n    }\n  }) || question.type === 'true_false' && /*#__PURE__*/React.createElement(TrueFalse, {\n    setStudentAnswer: setStudentAnswer,\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 44\n    }\n  }) || question.type === 'multiple_choice' && /*#__PURE__*/React.createElement(MultipleChoice, {\n    choices: question.choices,\n    scrambled: question.scrambled,\n    setStudentAnswer: setStudentAnswer,\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 49\n    }\n  }) || question.type === 'checkbox' && /*#__PURE__*/React.createElement(Checkbox, {\n    choices: question.choices,\n    scrambled: question.scrambled,\n    setStudentAnswer: setStudentAnswer,\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 42\n    }\n  })), page === 2 && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, \"Your Answer:\\xA0\", question.type === 'multiple_choice' ? /*#__PURE__*/React.createElement(\"span\", {\n    dangerouslySetInnerHTML: {\n      __html: question.choices[studentAnswer.charCodeAt(0) - 97]\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 53\n    }\n  }) : question.type === 'checkbox' ? /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, studentAnswer.split('').map((char, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    dangerouslySetInnerHTML: {\n      __html: question.choices[char.charCodeAt(0) - 97]\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }))) : question.type === 'numeric' ? studentAnswer + ' ' + question.units : studentAnswer), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, responseHtml && /*#__PURE__*/React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: responseHtml\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 30\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, responseHtml && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: handleContinue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 30\n    }\n  }, \"Continue\"))));\n};\nexport default AnswerForm;","map":{"version":3,"names":["React","useState","FillInBlank","Numeric","TrueFalse","MultipleChoice","Checkbox","AnswerForm","tokenRef","question","page","setPage","studentAnswer","setStudentAnswer","responseHtml","setResponseHtml","handleSubmit","event","preventDefault","submitAnswer","handleContinue","prompt","type","console","log","response","fetch","method","headers","current","body","JSON","stringify","id","answer","parameter","data","json","token","error","html","createElement","style","display","flexDirection","alignItems","fontSize","fontWeight","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","units","choices","scrambled","dangerouslySetInnerHTML","__html","charCodeAt","split","map","char","index","key","className","onClick"],"sources":["/Users/wight/chem4ap_react/exercises/src/components/AnswerForm.tsx"],"sourcesContent":["import React from 'react';\nimport { useState } from 'react';\nimport { Question } from '../types';\nimport FillInBlank from './FillInBlank';\nimport Numeric from './Numeric';\nimport TrueFalse from './TrueFalse';\nimport MultipleChoice from './MultipleChoice';\nimport Checkbox from './CheckBox';\n\ninterface AnswerFormProps {\n  tokenRef: React.MutableRefObject<string | null>;\n  question: Question;\n  page: number;\n  setPage: (page: number) => void;\n}\n\nconst AnswerForm: React.FC<AnswerFormProps> = ({ tokenRef, question, page, setPage }) => {\n  const [studentAnswer, setStudentAnswer] = useState<string>('');\n  const [responseHtml, setResponseHtml] = useState<string | null>(null);\n\n  const handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n    submitAnswer();\n    setPage(2); // Show the response\n  };\n\n  const handleContinue = () => {\n    question.prompt = '';\n    question.type = '';\n    setStudentAnswer(''); // Clear the answer\n    setResponseHtml(''); // Clear the response\n    setPage(1); // Go to the next question\n  };\n\n  const submitAnswer = async () => {\n    try {\n      console.log(\"Submitting: \" + studentAnswer);\n      const response = await fetch('/answer', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + tokenRef.current,\n        },\n        body: JSON.stringify({\n          id: question.id,\n          answer: studentAnswer,\n          ...(question.parameter && { parameter: question.parameter })\n        }),\n      });\n      const data = await response.json();\n      tokenRef.current = data.token;\n      if (!tokenRef.current) console.log(data.error,question);\n      else setResponseHtml(data.html);\n    } catch (error) {\n      console.error('Error submitting answer:', error);\n    }\n  };\n\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', fontSize: '1.5em', fontWeight: 'bold' }}>\n      {page === 1 && (\n        (question.type === 'fill_in_blank' && <FillInBlank setStudentAnswer={setStudentAnswer} handleSubmit={handleSubmit} />) ||\n        (question.type === 'numeric' && <Numeric units={question.units} setStudentAnswer={setStudentAnswer} handleSubmit={handleSubmit} />) ||\n        (question.type === 'true_false' && <TrueFalse setStudentAnswer={setStudentAnswer} handleSubmit={handleSubmit} />) ||\n        (question.type === 'multiple_choice' && <MultipleChoice choices={question.choices} scrambled={question.scrambled} setStudentAnswer={setStudentAnswer} handleSubmit={handleSubmit} />) ||\n        (question.type === 'checkbox' && <Checkbox choices={question.choices} scrambled={question.scrambled} setStudentAnswer={setStudentAnswer} handleSubmit={handleSubmit} />)\n      )}\n      {page === 2 && (\n        <div>\n          <span>Your Answer:&nbsp;\n            {\n              question.type === 'multiple_choice' ? <span dangerouslySetInnerHTML={{ __html: question.choices[studentAnswer.charCodeAt(0) - 97] }} /> :\n              question.type === 'checkbox' ? (\n              <ul>\n                {studentAnswer.split('').map((char: string, index: number) => (\n                <li key={index} dangerouslySetInnerHTML={{ __html: question.choices[char.charCodeAt(0) - 97] }} />\n                ))}\n              </ul>\n              ) : \n              question.type === 'numeric' ? studentAnswer + ' ' + question.units :\n              studentAnswer\n            }\n          </span>\n          <div>\n            {responseHtml && <div dangerouslySetInnerHTML={{ __html: responseHtml }} />}\n          </div>\n          <div>\n            {responseHtml && <button className=\"btn btn-primary\" onClick={handleContinue}>Continue</button>}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AnswerForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}